{% extends "base.html" %}

{% block page_styles %}
    <!-- Config Page -->
    <link href="/css/configure.css" rel="stylesheet">
    <link href='//api.tiles.mapbox.com/mapbox.js/v1.6.0-beta0/mapbox.css' rel='stylesheet'>
{% endblock %}

{% block navbar %}
  {% include 'navbar.html' %}
{% endblock %}

{% block content %}
<div class="container configure-container">
  <ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li class="active">Configure</li>
  </ol>
  <ul class="nav nav-tabs">
    <li><a href="/configure/">Appliance</a></li>
    <li><a href="/configure/openstack/">OpenStack</a></li>
    <li class="active"><a href="/configure/instances/">Flavors & Images</a></li>
  </ul>
  <div>
    <div class="page-header">
      <h1 id="grid">Flavors & Images</h3>
    </div>
    <p>Your appliance needs a minimum of one flavor and one image installed to provide service to users.  Click on the <strong>Install</strong> button next to the entries you want to intsall on your OpenStack cluster.  If you want to deactive a particular flavor or image, click on the <strong>Deactive</strong> button next to the entry.</p>
  
    <div class="page-header">
      <h3 id="grid">Instance Flavors</h3>
    </div>
    <table class="table table-hover">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Comment</th>
          <th># VPUs</th>
          <th>Memory (in MB)</th>
          <th>Disk (in GB)</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for flavor in flavors %}
        <tr>
          <td>{{ flavor.id }}</td>
          <td>{{ flavor.name }}</td>
          <td>{{ flavor.comment }}</td>
          <td>{{ flavor.vpu }}</td>
          <td>{{ flavor.mem }}</td>
          <td>{{ flavor.disk }}</td>
          <td><button id="install-{{ flavor.id }}" class="btn btn-sm btn-success">Install</button></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    <div class="page-header">
      <h3 id="grid">System Images</h3>
    </div>
    <table class="table table-hover">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Size (in B)</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for image in images %}
        <tr>
          <td>{{ image.id }}</td>
          <td>{{ image.name }}</td>
          <td>{{ image.size }}</td>
          <td><button id="install-{{ image.id }}" class="btn btn-sm btn-success">Install</button></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}

{% block javascript %}
	// login button
	$('#nav-login').on('click', function(e) { window.location = "/login" });
	var themap = L.mapbox.map('map', 'kordless.gnm28jg1', {scrollWheelZoom: false, zoomControl: false}).setView([20, 20], 3);
    setInterval(function(){themap.panBy([-1, 0]);},3000);
{% endblock %}

{% block extras %}
    <script src='//api.tiles.mapbox.com/mapbox.js/v1.6.0-beta0/mapbox.js'></script>
{% endblock %}
